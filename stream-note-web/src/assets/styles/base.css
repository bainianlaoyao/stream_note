@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Sora:wght@500;600;700&family=Source+Serif+4:wght@400;500;600&display=swap');
@import './tokens.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    box-sizing: border-box;
  }

  html,
  body {
    margin: 0;
    min-height: 100%;
  }

  body {
    color: var(--text-primary);
    font-family: var(--font-sans);
    background:
      radial-gradient(circle at 5% 8%, rgba(79, 124, 255, 0.1), transparent 34%),
      radial-gradient(circle at 94% 14%, rgba(79, 124, 255, 0.08), transparent 28%),
      linear-gradient(160deg, var(--bg-page), var(--bg-page-soft) 58%, var(--bg-page-strong));
    background-attachment: fixed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
  }

  #app {
    min-height: 100vh;
  }
}

@layer components {
  .glass-panel {
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-lg);
    background: linear-gradient(
      145deg,
      var(--glass-fill-strong),
      rgba(255, 255, 255, 0.74) 34%,
      var(--glass-fill) 70%,
      var(--glass-fill-soft)
    );
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow-lg), var(--glass-inset);
    backdrop-filter: blur(24px) saturate(130%);
    -webkit-backdrop-filter: blur(24px) saturate(130%);
  }

  .glass-panel::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: linear-gradient(165deg, var(--glass-highlight), transparent 44%);
    opacity: 0.54;
  }

  .glass-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    min-height: 26px;
    padding: 0 11px;
    border-radius: var(--radius-pill);
    border: 1px solid rgba(79, 124, 255, 0.24);
    background: rgba(79, 124, 255, 0.1);
    color: var(--accent-main);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.01em;
  }

  .glass-control {
    border: 1px solid rgba(79, 124, 255, 0.2);
    border-radius: var(--radius-sm);
    background: rgba(255, 255, 255, 0.64);
    color: var(--text-primary);
    font-family: var(--font-sans);
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.01em;
    padding: 9px 14px;
    cursor: pointer;
    transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  .glass-control:hover:not(:disabled) {
    transform: translateY(-1px);
    border-color: rgba(79, 124, 255, 0.44);
    box-shadow: var(--glass-shadow-sm);
  }

  .glass-control:focus-visible {
    outline: none;
    border-color: var(--accent-main);
    box-shadow: 0 0 0 3px rgba(79, 124, 255, 0.2);
  }

  .glass-control:disabled {
    cursor: not-allowed;
    opacity: 0.54;
    transform: none;
    box-shadow: none;
  }
}

@layer utilities {
  .font-display {
    font-family: var(--font-display);
  }

  .font-sans {
    font-family: var(--font-sans);
  }

  .font-serif {
    font-family: var(--font-serif);
  }

  .font-mono {
    font-family: var(--font-mono);
  }
}

.ProseMirror {
  min-height: 56vh;
  outline: none;
  padding: 30px 34px;
  color: var(--text-primary);
  font-family: var(--font-serif);
  font-size: 17px;
  line-height: 1.8;
  letter-spacing: 0.008em;
}

.ProseMirror p {
  margin: 0;
}

.ProseMirror p + p {
  margin-top: 0.54em;
}

.ProseMirror p.is-editor-empty:first-child::before {
  color: var(--text-placeholder);
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

.ProseMirror p.completed {
  color: var(--text-muted);
  text-decoration: line-through;
}

@media (max-width: 900px) {
  .glass-panel {
    border-radius: var(--radius-md);
  }

  .ProseMirror {
    min-height: 50vh;
    padding: 20px;
    font-size: 16px;
    line-height: 1.72;
  }
}
