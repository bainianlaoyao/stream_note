# Stream Note 前端体验提升计划

基于当前前端架构（Vue 3 + TypeScript + Pinia + Vite 5）与“Washi Acrylic（和纸亚克力）”设计语言，制定以下体验提升计划。

## 1. 编辑器体验增强 (Core Editor Experience)

当前 TipTap 仅接入了基础的 `StarterKit`，作为核心的“流式笔记”输入端，体验略显单薄。

- [ ] **Slash Commands (斜杠命令)**
  - **目标**：输入 `/` 唤起悬浮菜单，快速插入任务（`[]`）、标题、列表等。
  - **价值**：符合“流式输入”的心智，无需鼠标离开键盘，提升输入效率。
- [ ] **Bubble Menu (气泡菜单)**
  - **目标**：选中文本时弹出悬浮工具栏（加粗、斜体、高亮等）。
  - **价值**：保持界面极简的同时提供富文本能力。
- [ ] **闭环“跳转到来源”功能**
  - **目标**：在 `StreamView.vue` 中监听 URL 参数 `blockId`，利用 TipTap 的 API 滚动到对应 Block 并给予短暂的高亮反馈（Highlight Animation）。
  - **价值**：打通任务列表与文档内容的双向联动，提升上下文追溯体验。

## 2. 任务管理 UX 升级 (Task Management UX)

- [ ] **上下文预览 (Context Snippet)**
  - **目标**：在任务列表中，除了显示任务文本，截取该任务在文档中**前后的一小段文本**作为上下文（Context）。
  - **价值**：让用户不跳转也能知道任务的背景。
- [ ] **微交互动画 (Micro-interactions)**
  - **目标**：当在 `TaskItem.vue` 中点击完成时，增加更细腻的动画（如文本划线动画、复选框的弹性缩放、卡片变暗下沉等）。
  - **价值**：增强“完成任务”的爽快感和视觉反馈。
- [ ] **骨架屏与加载状态**
  - **目标**：在触发 AI 提取时，引入骨架屏或更具科技感的扫描动画。
  - **价值**：缓解用户的等待焦虑，提升产品质感。

## 3. 性能与代码架构优化 (Performance & Architecture)

- [ ] **编辑器状态同步优化**
  - **目标**：优化 `StreamView.vue` 中深度监听和对比文档内容的逻辑。避免在文档过长时频繁序列化带来的性能瓶颈。
  - **方案**：仅在外部强制覆盖时才调用 `setContent`，或引入 TipTap 的协作/版本对比机制进行增量更新。
- [ ] **全局 Toast 通知系统**
  - **目标**：引入一个全局的 Toast/Snackbar 系统，用于非阻塞的轻量级提示（如“已自动保存”、“提取成功”）。
  - **价值**：替代当前页面内生硬的 `ui-pill` 渲染，提升反馈体验。
- [ ] **离线优先 (Offline-First)**
  - **目标**：引入 `localForage` 或 `IndexedDB`，在 `documentStore` 中先将内容保存到本地，再异步同步到后端。
  - **价值**：实现无网环境下的秒开和流畅编辑，提升应用的可靠性。

## 4. 视觉与设计语言深化 (Visual Polish)

- [ ] **暗色模式 (Dark Mode)**
  - **目标**：设计一套暗色模式的 Token（如深色石板/炭灰纸张质感 + 磨砂黑玻璃），通过 CSS 变量无缝切换。
  - **价值**：满足夜间使用场景，丰富“和纸亚克力”设计语言的表达。
- [ ] **滚动条美化**
  - **目标**：尝试更隐形或悬浮样式的自定义滚动条。
  - **价值**：避免破坏整体的沉浸感，与亚克力和纸张的质感更契合。
